<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tohf-e-Hayat | Blood & Organ Donation</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for organ checkboxes */
        .organ-checkbox-group {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .organ-checkbox-group.open {
            max-height: 500px; /* Adjust as needed */
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Header & Navigation -->
    <header class="bg-white shadow-md">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-3xl font-bold text-red-700">Tohf-e-Hayat</h1>
            <div class="space-x-4">
                <a href="#about" class="text-gray-700 hover:text-red-700">About Us</a>
                <a href="#services" class="text-gray-700 hover:text-red-700">Services</a>
                <a href="#register" class="bg-red-700 text-white px-4 py-2 rounded-full font-semibold hover:bg-red-800 transition duration-300">Register Now</a>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <main>
        <section class="bg-red-700 text-white py-20">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-5xl font-bold mb-4">A Gift of Life</h2>
                <p class="text-xl mb-8">Be a hero. Save lives through blood and organ donation.</p>
                <a href="#register" class="bg-white text-red-700 px-6 py-3 rounded-full font-bold text-lg hover:bg-gray-100 transition duration-300">Become a Donor Today</a>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="container mx-auto px-6 py-16">
            <h3 class="text-4xl font-bold text-center text-gray-800 mb-8">About Tohf-e-Hayat</h3>
            <p class="text-lg text-gray-700 max-w-3xl mx-auto text-center">
                "Tohf-e-Hayat" (Gift of Life) is a dedicated service committed to bridging the gap between donors and recipients. We facilitate life-saving blood transfusions and organ transplants by managing a secure and reliable registry of willing donors. Our mission is to spread awareness and make donation accessible to all.
            </p>
        </section>

        <!-- Services Section -->
        <section id="services" class="bg-gray-100 py-16">
            <div class="container mx-auto px-6">
                <h3 class="text-4xl font-bold text-center text-gray-800 mb-12">Our Services</h3>
                <div class="flex flex-col md:flex-row gap-8">
                    <!-- Blood Donation Card -->
                    <div class="bg-white rounded-lg shadow-lg p-8 flex-1">
                        <div class="text-red-700 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 4.006 4.006 0 00-3.663-.138C11.127 4.046 9.896 4 8.664 4c-1.232 0-2.453.046-3.662.138a4.006 4.006 0 00-3.7 3.7 4.006 4.006 0 00-.138 3.663C1.046 11.127 1 12.358 1 13.586c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 4.006 4.006 0 003.663.138c1.209.092 2.43.138 3.662.138 1.232 0 2.453-.046 3.662-.138a4.006 4.006 0 003.7-3.7 4.006 4.006 0 00.138-3.663c.092-1.209.138-2.43.138-3.662z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9" />
                            </svg>
                        </div>
                        <h4 class="text-2xl font-bold text-center mb-4">Blood Bank Services</h4>
                        <p class="text-gray-700 text-center">
                            We maintain a comprehensive database of voluntary blood donors. Register with us to be notified when your blood type is needed, or search our registry (via authorized partners) to find donors in an emergency.
                        </p>
                    </div>
                    <!-- Organ Donation Card -->
                    <div class="bg-white rounded-lg shadow-lg p-8 flex-1">
                        <div class="text-red-700 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                            </svg>
                        </div>
                        <h4 class="text-2xl font-bold text-center mb-4">Organ Donor Registry</h4>
                        <p class="text-gray-700 text-center">
                            Pledge to save lives after yours. By registering as an organ donor, you can give the gift of life to multiple people. We securely manage your pledge and work with national transplant organizations.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Registration Form Section -->
        <section id="register" class="container mx-auto px-6 py-16">
            <div class="bg-white max-w-3xl mx-auto p-8 md:p-12 rounded-lg shadow-xl">
                <h3 class="text-3xl font-bold text-center text-gray-800 mb-8">Register as a Donor</h3>
                
                <!-- Success Message (Hidden by default) -->
                <div id="successMessage" class="hidden bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6" role="alert">
                    <strong class="font-bold">Thank you!</strong>
                    <span class="block sm:inline"> Your registration has been received.</span>
                </div>

                <!-- Error Message (Hidden by default) -->
                <div id="errorMessage" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6" role="alert">
                    <strong class="font-bold">Error:</strong>
                    <span class="block sm:inline" id="errorText">Please fill out all required fields.</span>
                </div>

                <form id="donorForm" class="space-y-6">
                    <!-- Personal Information -->
                    <div>
                        <label for="fullName" class="block text-sm font-medium text-gray-700">Full Name</label>
                        <input type="text" id="fullName" name="fullName" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
                            <input type="email" id="email" name="email" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-700">Phone Number</label>
                            <input type="tel" id="phone" name="phone" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="bloodGroup" class="block text-sm font-medium text-gray-700">Blood Group</label>
                            <select id="bloodGroup" name="bloodGroup" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                                <option value="" disabled selected>Select your blood group</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                        <div>
                            <label for="city" class="block text-sm font-medium text-gray-700">City / Town</label>
                            <input type="text" id="city" name="city" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                        </div>
                    </div>

                    <!-- Donation Type -->
                    <fieldset>
                        <legend class="text-base font-medium text-gray-900">I want to register as a:</legend>
                        <div class="mt-4 space-y-4">
                            <div class="flex items-start">
                                <div class="flex items-center h-5">
                                    <input id="isBloodDonor" name="isBloodDonor" type="checkbox" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded">
                                </div>
                                <div class="ml-3 text-sm">
                                    <label for="isBloodDonor" class="font-medium text-gray-700">Blood Donor</label>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="flex items-center h-5">
                                    <input id="isOrganDonor" name="isOrganDonor" type="checkbox" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded">
                                </div>
                                <div class="ml-3 text-sm">
                                    <label for="isOrganDonor" class="font-medium text-gray-700">Organ Donor (Pledge)</label>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <!-- Organ Selection (Conditional) -->
                    <div id="organOptions" class="organ-checkbox-group space-y-3 pt-4 border-t border-gray-200">
                        <p class="text-sm font-medium text-gray-700">Please specify which organs/tissues you wish to donate (optional):</p>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                            <div class="flex items-center"><input type="checkbox" name="organs" value="Kidneys" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded"><label class="ml-2 text-sm text-gray-600">Kidneys</label></div>
                            <div class="flex items-center"><input type="checkbox" name="organs" value="Liver" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded"><label class="ml-2 text-sm text-gray-600">Liver</label></div>
                            <div class="flex items-center"><input type="checkbox" name="organs" value="Heart" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded"><label class="ml-2 text-sm text-gray-600">Heart</label></div>
                            <div class="flex items-center"><input type="checkbox" name="organs" value="Lungs" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded"><label class="ml-2 text-sm text-gray-600">Lungs</label></div>
                            <div class="flex items-center"><input type="checkbox" name="organs" value="Pancreas" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded"><label class="ml-2 text-sm text-gray-600">Pancreas</label></div>
                            <div class="flex items-center"><input type="checkbox" name="organs" value="Eyes" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded"><label class="ml-2 text-sm text-gray-600">Eyes (Corneas)</label></div>
                            <div class="flex items-center"><input type="checkbox" name="organs" value="Tissues" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded"><label class="ml-2 text-sm text-gray-600">Tissues</text></label></div>
                            <div class="flex items-center"><input type="checkbox" name="organs" value="All" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded"><label class="ml-2 text-sm text-gray-600">Any/All Organs</label></div>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div>
                        <button type="submit" id="submitButton" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition duration-300">
                            Register Me
                        </button>
                    </div>
                </form>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-300 py-8">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 Tohf-e-Hayat. All rights reserved.</p>
            <p class="text-sm mt-2">A conceptual service for demonstrating web and database integration.</p>
        </div>
    </footer>

    <script>
        const organDonorCheckbox = document.getElementById('isOrganDonor');
        const organOptionsDiv = document.getElementById('organOptions');
        const donorForm = document.getElementById('donorForm');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');
        const submitButton = document.getElementById('submitButton');
        const bloodDonorCheckbox = document.getElementById('isBloodDonor'); // Add this
        const bloodGroupSelect = document.getElementById('bloodGroup'); // Add this

        // Show/hide organ options based on the checkbox
        organDonorCheckbox.addEventListener('change', () => {
            if (organDonorCheckbox.checked) {
                organOptionsDiv.classList.add('open');
            } else {
                organOptionsDiv.classList.remove('open');
            }
        });

        // Make blood group required only if Blood Donor is checked
        bloodDonorCheckbox.addEventListener('change', () => {
            if (bloodDonorCheckbox.checked) {
                bloodGroupSelect.setAttribute('required', 'required');
            } else {
                bloodGroupSelect.removeAttribute('required');
            }
        });

        // Handle form submission
        donorForm.addEventListener('submit', async (e) => {
            e.preventDefault(); // Prevent the form from submitting traditionally
            
            // Clear previous messages
            successMessage.classList.add('hidden');
            errorMessage.classList.add('hidden');
            submitButton.disabled = true;
            submitButton.textContent = 'Registering...';

            // Get form data
            const formData = new FormData(donorForm);
            
            // Collect organ data
            const organs = [];
            document.querySelectorAll('input[name="organs"]:checked').forEach(checkbox => {
                organs.push(checkbox.value);
            });

            const data = {
                fullName: formData.get('fullName'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                bloodGroup: formData.get('bloodGroup'),
                city: formData.get('city'),
                isBloodDonor: formData.get('isBloodDonor') === 'on',
                isOrganDonor: formData.get('isOrganDonor') === 'on',
                organs: organs
            };

            // --- IMPORTANT ---
            // In a real application, you would send this data to your backend on Render.
            // The URL would be your Render application's URL, e.g., 'https://your-app-name.onrender.com/api/register'
            
            try {
                // We simulate a network request here for demonstration
                await new Promise(resolve => setTimeout(resolve, 1000));

                // --- START: SIMULATION ---
                // This 'fetch' call is a placeholder and will not actually work
                // You would uncomment and replace this with your real backend endpoint
                
                
                const response = await fetch('https://tohf-e-hayat-backend.onrender.com/api/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                const result = await response.json();
                console.log('Success:', result);
                
                // --- END: SIMULATION ---

                // Show success message
                console.log("Form data (simulated submission):", data);
                successMessage.classList.remove('hidden');
                donorForm.reset(); // Clear the form
                organOptionsDiv.classList.remove('open'); // Hide organ options

            } catch (error) {
                // Show error message
                console.error('Error:', error);
                errorText.textContent = 'Something went wrong. Please try again later.';
                errorMessage.classList.remove('hidden');
            } finally {
                // Re-enable the button
                submitButton.disabled = false;
                submitButton.textContent = 'Register Me';
            }
        });
    </script>

</body>
</html>

